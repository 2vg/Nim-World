# インラインアセンブリ

Nimはシステムプログラミング言語なので、 インラインアセンブリを使うことができます。

x86_64で動く簡単なプログラムを書いてみましょう。
この処理はx86_64 System V C ABIに依存しているので、Windowsでは動かないことに注意してください。

```nim
{.push stackTrace:off.}
proc add(a, b: uint64): uint64 =
  asm """
    mov %%rdi, %%rax
    add %%rsi, %%rax
    : "=a"(`result`)
  """
{.pop.}

echo add(1, 4) #=> 5
```

基本的にGCC拡張構文とそっくりですが、いくつか気がつくことがあります。

* プラグマを使ってstackTrace:offを指定することでコンパイラが情報収集のために余分なコードを生成することを防ぐ
* asm文全体をトリプルクォート(""")文字列リテラルで囲んでいる
* Nimの識別子への参照は `` で囲むことで可能となる
