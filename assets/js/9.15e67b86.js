(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{55:function(e,t,n){"use strict";n.r(t);var s=n(0),a=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"パッケージ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#パッケージ","aria-hidden":"true"}},[e._v("#")]),e._v(" パッケージ")]),n("p",[e._v("Nimのパッケージシステムは"),n("a",{attrs:{href:"https://github.com/nim-lang/nimble",target:"_blank",rel:"noopener noreferrer"}},[e._v("nimble")]),e._v("という物で管理します。")]),n("p",[e._v("パッケージリストはGitHubで管理されています。 "),n("a",{attrs:{href:"https://github.com/nim-lang/packages",target:"_blank",rel:"noopener noreferrer"}},[e._v("nim-lang/packages")])]),n("p",[e._v("たくさんのコマンドがありますが、ここでは最低限覚える必要があるコマンドだけを解説します。")]),n("h2",{attrs:{id:"パッケージ作成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#パッケージ作成","aria-hidden":"true"}},[e._v("#")]),e._v(" パッケージ作成")]),n("p",[e._v("まずはパッケージを作ってみましょう！次のコマンドを打ってみてください。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("nimble init\n")])]),n("p",[e._v("実行するとぞろぞろと英文が出てきます。")]),n("p",[e._v("例えば"),n("code",[e._v("/hello")]),e._v("というディレクトリで"),n("code",[e._v("nimble init")]),e._v("すると次のように表示されるはずです。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('$ nimble init\n      Info: In order to initialise a new Nimble package, I will need to ask you\n        ... some questions. Default values are shown in square brackets, press\n        ... enter to use them.\n      Using "hello" for new package name\n      Using "2vg" for new package author\n      Using "src" for new package source directory\n    Prompt: Package type? [lib/bin]\n    Answer: _\n')])]),n("p",[e._v("いくつかの質問に答えて行くと自動的にディレクトリ構成をしてくれます。")]),n("p",[e._v("最初の質問では「パッケージタイプはlibですか？binですか？」というものです。")]),n("p",[n("code",[e._v("lib")]),e._v("はライブラリとしてNimプログラムをパッケージにする時に、"),n("code",[e._v("bin")]),e._v("は実行バイナリとしてNimプログラムをパッケージにする時と使い分けます。")]),n("p",[e._v("ちなみに何も答えずにエンターを押したり、"),n("code",[e._v("lib")]),e._v("や"),n("code",[e._v("bin")]),e._v("以外の答えを入力すると再度"),n("code",[e._v("Answer:")]),e._v("が表示されます。")]),n("p",[e._v("パッケージタイプを答えると、次は初期状態でのパッケージのバージョンの指定に関する質問がされます。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    Prompt: Initial version of package? [0.1.0]\n    Answer: _\n")])]),n("p",[e._v("何も入力せずエンターを押すと自動的に"),n("code",[e._v("0.1.0")]),e._v("指定になります。")]),n("p",[e._v("バージョンの質問が終わるとパッケージの簡単な説明の入力を促されます。")]),n("p",[e._v("こちらは空でエンターすると何の説明もないパッケージとなります。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    Prompt: Package description? [A new awesome nimble package]\n    Answer: _\n")])]),n("p",[e._v("お次はライセンスの選択です。")]),n("p",[e._v("こちらはパッケージタイプの入力と同様にちゃんと選択しないといけません。")]),n("p",[e._v("迷ったら"),n("code",[e._v("MIT")]),e._v("でいいでしょう。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    Prompt: Package License? [MIT/BSD2/GPLv3/LGPLv3/Apache2]\n    Answer: _\n")])]),n("p",[e._v("最後に動作に必要なNimの最低バージョンの指定があります。")]),n("p",[e._v("指定しない場合は今動作しているNimのバージョンが自動的に選択されます。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    Prompt: Lowest supported Nim version? [0.18.0]\n    Answer: _\n")])]),n("p",[e._v("全ての入力が終わると自動的にディレクトリにファイルなどが生成されます。")]),n("p",[n("code",[e._v("パッケージ名.nimble")]),e._v("、"),n("code",[e._v("src/パッケージ名.nim")]),e._v("、"),n("code",[e._v("tests/test1.nim")]),e._v("、"),n("code",[e._v("tests/test1.nims")]),e._v("というファイルなどが生成されているはずです。")]),n("p",[e._v("今回は"),n("code",[e._v("hello")]),e._v("パッケージとします。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v(".\n├── hello.nimble\n├── src\n│   └── hello.nim\n└── tests\n    ├── test1.nim\n    └── test1.nims\n")])]),n("p",[e._v("それぞれのファイルは以下のような物です。")]),n("ul",[n("li",[n("code",[e._v("hello.nimble")])])]),n("p",[e._v("パッケージの設定ファイル。")]),n("p",[e._v("ここに依存パッケージの情報やパッケージの概要などが書かれている。")]),n("ul",[n("li",[n("code",[e._v("src/hello.nim")])])]),n("p",[e._v("メインコードを記述する。")]),n("p",[e._v("パッケージ内でモジュールとしてコードを分ける場合、2種類の分け方があります。")]),n("p",[e._v("パッケージ名と同じ名前のディレクトリを作成(ここではhelloディレクトリ)し、そこにメインで使うモジュールを入れると、")]),n("p",[n("code",[e._v("hello/モジュール名")]),e._v("でサブモジュールのような形で公開し、こちらも合わせて利用することが出来ます。")]),n("p",[n("code",[e._v("private")]),e._v("というディレクトリを作成して、そこにメインで使うモジュールを入れると、"),n("code",[e._v("private")]),e._v("内のモジュールは公開されず、パッケージのプロジェクト内でのみ利用することが出来ます。")]),n("ul",[n("li",[n("code",[e._v("tests/test1.nim")])])]),n("p",[e._v("テスト用ファイル。")]),n("p",[n("code",[e._v("nimble test")]),e._v("でパッケージのテストが実行でき、そのテスト内容をこのファイルに記述します。")]),n("ul",[n("li",[n("code",[e._v("tests/test1.nims")])])]),n("p",[e._v("test1用NimScriptファイル。")]),n("p",[e._v("ここでのNimScriptファイルは"),n("code",[e._v("hoge.nim.cfg")]),e._v("のような設定ファイルと同じような感じですが、")]),n("p",[e._v("実際のNimScriptは他にも多様な使い方が出来るので、別の"),n("a",{attrs:{href:"/nimscript"}},[e._v("NimScript")]),e._v("章を参照してください。")]),n("h3",{attrs:{id:"nimbleファイル"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nimbleファイル","aria-hidden":"true"}},[e._v("#")]),e._v(" .nimbleファイル")]),n("p",[e._v("nimbleファイルはパッケージのいちばん重要な設定ファイルです。")]),n("p",[e._v("nimbleファイルの最小限の書き方は次のとおりです。")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('# これらの記述は必須項目で、1つでも欠けていると`nimble`は警告を出します。\n\n# Package\n\n#バージョン情報 \nversion     = "0.1.0"\n# 作成者の名前\nauthor      = "Your Name"\n# パッケージの概要\ndescription = "Example .nimble file."\n# パッケージのライセンス\nlicense     = "MIT"\n\n# Deps\n\n# 依存関係 Nimコンパイラの依存記述は必須\nrequires "nim >= 0.18.0"\n# パッケージリストに無くてもGitHubなどに上がっていればこのように指定できる\n# requires "https://github.com/2vg/mofuw >= 0.1.0"\n')])]),n("p",[n("code",[e._v('task タスク名, "概要"')]),e._v("と記述することで、"),n("code",[e._v("nimble タスク名")]),e._v("でそのボディに記述されたコードを実行できます。")]),n("p",[n("code",[e._v("before タスク名")]),e._v("と記述するとそのタスク名のタスクが実行される前に、ボディに記述されたコードを実行実行されます。")]),n("pre",{pre:!0,attrs:{class:"language-nim"}},[n("code",[e._v("task hello"),n("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),n("span",{attrs:{class:"token string"}},[e._v('"this is hello task."')]),n("span",{attrs:{class:"token operator"}},[e._v(":")]),e._v("\n  echo "),n("span",{attrs:{class:"token string"}},[e._v('"Hello"')]),e._v("\n\nbefore hello"),n("span",{attrs:{class:"token operator"}},[e._v(":")]),e._v("\n  echo "),n("span",{attrs:{class:"token string"}},[e._v('"helloタスク実行前準備"')]),e._v("\n\n"),n("span",{attrs:{class:"token comment"}},[e._v("# $ nimble hello")]),e._v("\n"),n("span",{attrs:{class:"token comment"}},[e._v("# $ helloタスク実行前準備")]),e._v("\n"),n("span",{attrs:{class:"token comment"}},[e._v("# $ Hello")]),e._v("\n")])]),n("p",[e._v("また、他にも以下のような項目があります。 "),n("a",{attrs:{href:"https://github.com/nim-lang/nimble#optional",target:"_blank",rel:"noopener noreferrer"}},[e._v("optional")])]),n("ul",[n("li",[n("code",[e._v("skipDirs")]),e._v(": インストール時にスキップするディレクトリ名のリスト。カンマで区切れます。")]),n("li",[n("code",[e._v("skipFiles")]),e._v(": インストール時にスキップするファイル名のリスト。カンマで区切れます。")]),n("li",[n("code",[e._v("skipExt")]),e._v(": インストール時にスキップするファイル拡張子のリスト。カンマで区切れます。")]),n("li",[n("code",[e._v("installDirs")]),e._v(":")]),n("li",[n("code",[e._v("installFiles")]),e._v(":")]),n("li",[n("code",[e._v("installExt")]),e._v(":")]),n("li",[n("code",[e._v("srcDir")]),e._v(" - ソースコードを含むディレクトリを指定します。デフォルトは"),n("code",[e._v("src")]),e._v("です。")]),n("li",[n("code",[e._v("binDir")]),e._v(" - "),n("code",[e._v("nimble build")]),e._v("がバイナリを出力するディレクトリを指定します。デフォルトでは"),n("code",[e._v("bin")]),e._v("です。")]),n("li",[n("code",[e._v("bin")]),e._v(":")]),n("li",[n("code",[e._v("backend")]),e._v(": コンパイルに使用するバックエンドを指定します。"),n("code",[e._v("c")]),e._v("、"),n("code",[e._v("cc")]),e._v("、 "),n("code",[e._v("cpp")]),e._v("、 "),n("code",[e._v("objc")]),e._v("、 "),n("code",[e._v("js")]),e._v("が指定可能で、デフォルトは"),n("code",[e._v("c")]),e._v("です。")])]),n("h2",{attrs:{id:"パッケージのインストール"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#パッケージのインストール","aria-hidden":"true"}},[e._v("#")]),e._v(" パッケージのインストール")])])}],!1,null,null,null);t.default=a.exports}}]);